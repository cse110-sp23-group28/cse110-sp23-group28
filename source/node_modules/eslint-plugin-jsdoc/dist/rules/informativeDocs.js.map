{"version":3,"file":"informativeDocs.js","names":["_areDocsInformative","require","_iterateJsdoc","_interopRequireDefault","obj","__esModule","default","defaultAliases","a","defaultUselessWords","getNamesFromNode","node","type","parent","key","id","name","declarations","init","filter","Boolean","_default","iterateJsdoc","context","jsdoc","report","utils","aliases","uselessWords","options","nodeNames","descriptionIsRedundant","text","extraName","textTrimmed","trim","areDocsInformative","join","description","lastDescriptionLine","getDescription","descriptionReported","tag","tags","reportJSDoc","line","iterateAllJsdocs","meta","docs","url","schema","additionalProperties","properties","items","exports","module"],"sources":["../../src/rules/informativeDocs.js"],"sourcesContent":["import {\n  areDocsInformative,\n} from 'are-docs-informative';\nimport iterateJsdoc from '../iterateJsdoc';\n\nconst defaultAliases = {\n  a: [\n    'an', 'our',\n  ],\n};\n\nconst defaultUselessWords = [\n  'a', 'an', 'i', 'in', 'of', 's', 'the',\n];\n\n/* eslint-disable complexity -- Temporary */\n\n/**\n * @param {import('eslint').Rule.Node|import('@typescript-eslint/types').TSESTree.Node|null|undefined} node\n * @returns {string[]}\n */\nconst getNamesFromNode = (node) => {\n  switch (node?.type) {\n  case 'AccessorProperty':\n  case 'MethodDefinition':\n  case 'PropertyDefinition':\n  case 'TSAbstractAccessorProperty':\n  case 'TSAbstractMethodDefinition':\n  case 'TSAbstractPropertyDefinition':\n    return [\n      ...getNamesFromNode(\n        /** @type {import('@typescript-eslint/types').TSESTree.Node} */ (\n          node.parent\n        ).parent,\n      ),\n      ...getNamesFromNode(\n        /** @type {import('@typescript-eslint/types').TSESTree.Node} */\n        (node.key),\n      ),\n    ];\n  case 'ClassDeclaration':\n  case 'ClassExpression':\n  case 'FunctionDeclaration':\n  case 'FunctionExpression':\n  case 'TSModuleDeclaration':\n  case 'TSMethodSignature':\n  case 'TSDeclareFunction':\n  case 'TSEnumDeclaration':\n  case 'TSEnumMember':\n  case 'TSInterfaceDeclaration':\n  case 'TSTypeAliasDeclaration':\n    return getNamesFromNode(\n      /** @type {import('@typescript-eslint/types').TSESTree.ClassDeclaration} */\n      (node).id,\n    );\n  case 'Identifier':\n    return [\n      node.name,\n    ];\n  case 'Property':\n    return getNamesFromNode(\n      /** @type {import('@typescript-eslint/types').TSESTree.Node} */\n      (node.key),\n    );\n  case 'VariableDeclaration':\n    return getNamesFromNode(\n      /** @type {import('@typescript-eslint/types').TSESTree.Node} */\n      (node.declarations[0]),\n    );\n  case 'VariableDeclarator':\n    return [\n      ...getNamesFromNode(\n        /** @type {import('@typescript-eslint/types').TSESTree.Node} */\n        (node.id),\n      ),\n      ...getNamesFromNode(\n        /** @type {import('@typescript-eslint/types').TSESTree.Node} */\n        (node.init),\n      ),\n    ].filter(Boolean);\n  default:\n    return [];\n  }\n};\n/* eslint-enable complexity -- Temporary */\n\nexport default iterateJsdoc(({\n  context,\n  jsdoc,\n  node,\n  report,\n  utils,\n}) => {\n  const {\n    aliases = defaultAliases,\n    uselessWords = defaultUselessWords,\n  } = context.options[0] || {};\n  const nodeNames = getNamesFromNode(node);\n\n  /**\n   * @param {string} text\n   * @param {string} extraName\n   * @returns {boolean}\n   */\n  const descriptionIsRedundant = (text, extraName = '') => {\n    const textTrimmed = text.trim();\n    return Boolean(textTrimmed) && !areDocsInformative(textTrimmed, [\n      extraName, nodeNames,\n    ].filter(Boolean).join(' '), {\n      aliases,\n      uselessWords,\n    });\n  };\n\n  const {\n    description,\n    lastDescriptionLine,\n  } = utils.getDescription();\n  let descriptionReported = false;\n\n  for (const tag of jsdoc.tags) {\n    if (descriptionIsRedundant(tag.description, tag.name)) {\n      utils.reportJSDoc(\n        'This tag description only repeats the name it describes.',\n        tag,\n      );\n    }\n\n    descriptionReported ||= tag.description === description &&\n      /** @type {import('comment-parser').Spec & {line: import('../iterateJsdoc.js').Integer}} */\n      (tag).line === lastDescriptionLine;\n  }\n\n  if (!descriptionReported && descriptionIsRedundant(description)) {\n    report('This description only repeats the name it describes.');\n  }\n}, {\n  iterateAllJsdocs: true,\n  meta: {\n    docs: {\n      description:\n        'This rule reports doc comments that only restate their attached name.',\n      url: 'https://github.com/gajus/eslint-plugin-jsdoc#informative-docs',\n    },\n    schema: [\n      {\n        additionalProperties: false,\n        properties: {\n          aliases: {\n            items: {\n              type: 'string',\n            },\n            type: 'array',\n          },\n          uselessWords: {\n            items: {\n              type: 'string',\n            },\n            type: 'array',\n          },\n        },\n        type: 'object',\n      },\n    ],\n    type: 'suggestion',\n  },\n});\n"],"mappings":"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"}